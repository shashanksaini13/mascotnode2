{"version":3,"sources":["lib/umd/immutableJSONPatch.js"],"names":["global","factory","exports","module","define","amd","globalThis","self","immutableJSONPatch","this","_typeof$1","obj","Symbol","iterator","constructor","prototype","strictEqual","a","b","initial","array","slice","length","isObjectOrArray","value","ownKeys","object","enumerableOnly","symbols","keys","Object","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","source","forEach","key","defineProperty","configurable","writable","getOwnPropertyDescriptors","defineProperties","_typeof","shallowClone","Array","isArray","copy","symbol","_copy","applyProp","updatedObject","getIn","path","undefined","setIn","createPath","updatedValue","newObject","Error","updateIn","callback","deleteIn","_key","splice","insertAt","parentPath","index","items","TypeError","JSON","stringify","updatedItems","existsIn","json","parseJSONPointer","pointer","split","shift","map","p","replace","compileJSONPointer","String","join","operations","options","updatedJson","operation","includes","op","from","validateJSONPatchOperation","last","parent","concat","resolvePathIndex","before","result","previousJson","patchOp","PATCH_OPS","_ref6","isEqual","test","after","_result","add","_ref3","isArrayItem","remove","_ref2","_ref","_ref4","_value","move","_ref5","removedJson","REVERT_OPS","revertAdd","revertRemove","revertReplace","array1","array2","startsWith","revert","revertJSONPatch","revertOperations","revertOp"],"mappings":"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"}